<!DOCTYPE html>
<html>
<head>
    <!-- <script src='jquery-3.6.0.min.js'></script> -->
<style>

.text {
  overflow: hidden;
}

</style>
</head>
<body onload="initMap()">
  <div id="text">once upon a timee<br>
  in a big house<br>
i was small<br>
</div>

  <div id="map"></div>
  <script>
//
// // Split the text into an array of paragraphs
// const paragraphs = document.getElementById("text").innerText.split('\n');
//
// // Initialize the index to 0
// let i = 0;
//
// // Set the scroll-behavior CSS property of the html element to auto
// document.querySelector('html').style.scrollBehavior = 'auto';
//
// // Initialize the counter to 0
// let counter = 0;
//
// // Set the threshold for the counter
// const threshold = 10;
//
// // Attach the wheel event listener to the map element
// window.addEventListener('wheel', function(event) {
//   // Prevent the page from zooming
//   event.preventDefault();
//
//   // Increment the counter
//   counter++;
//
//   // If the deltaY value is greater than 0, the index is less than the length of the paragraphs array, and the counter is equal to or greater than the threshold
//   if (event.deltaY > 0 && i < paragraphs.length && counter >= threshold) {
//     // Reset the counter
//     counter = 0;
//
//     // Increment the index and append the next paragraph to the text element
//     i++;
//     document.getElementById("text").innerHTML += `${paragraphs[i]}`;
//   }
// });
//
// // Set the innerHTML of the text element to the first paragraph in the paragraphs array
// document.getElementById("text").innerHTML = paragraphs[0];
//



//NEW


// Split the text into an array of paragraphs
const paragraphs = document.getElementById("text").innerText.split('\n');

// Initialize the index to 0
let i = 0;

// Set the scroll-behavior CSS property of the html element to auto
document.querySelector('html').style.scrollBehavior = 'auto';

// Initialize the counter to 0
let counter = 0;

// Set the threshold for the counter
const threshold = 10;

// Function to handle the scrolling or zooming
function handleScroll(event) {
  // Prevent the page from zooming
  event.preventDefault();

  // Increment the counter
  counter++;

  // If the deltaY value is greater than 0, the index is less than the length of the paragraphs array, and the counter is equal to or greater than the threshold
  if (event.deltaY > 0 && i < paragraphs.length && counter >= threshold) {
    // Reset the counter
    counter = 0;

    // Increment the index and append the next paragraph to the text element
    i++;
    document.getElementById("text").innerHTML += `${paragraphs[i]}`;
  }
}

// Attach the wheel event listener to the map element on desktop devices
window.addEventListener('wheel', handleScroll);

// Attach the touchstart, touchmove, and touchend event listeners to the map element on mobile devices
window.addEventListener('touchstart', handleScroll);
window.addEventListener('touchmove', handleScroll);
window.addEventListener('touchend', handleScroll);

// Set the innerHTML of the text element to the first paragraph in the paragraphs array
document.getElementById("text").innerHTML = paragraphs[0];

function handleScroll(event) {
  // Initialize the deltaY value to 0
  let deltaY = 0;

  // If the event is a touch event
  if (event.type.startsWith('touch')) {
    // Get the deltaY value from the clientY property of the first touch
    deltaY = event.touches[0].clientY;
  } else {
    // Otherwise, get the deltaY value from the event
    deltaY = event.deltaY;
  }

  // Prevent the page from zooming
  event.preventDefault();

  // Increment the counter
  counter++;

  // If the deltaY value is greater than 0, the index is less than the length of the paragraphs array, and the counter is equal to or greater than the threshold
  if (deltaY > 0 && i < paragraphs.length && counter >= threshold) {
    // Reset the counter
    counter = 0;

    // Increment the index and append the next paragraph to the text element
    i++;
    document.getElementById("text").innerHTML += `${paragraphs[i]}`;
  }
}

</script>
</body>
</html>
